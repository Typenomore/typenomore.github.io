(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[11],{8554:function(e,t,r){Promise.resolve().then(r.bind(r,2390))},2266:function(e,t,r){"use strict";r.d(t,{Z:function(){return i}});var n=r(9268);function i(e){let{error:t,...r}=e,{register:i}=r;return(0,n.jsxs)("label",{htmlFor:null==r?void 0:r.id,className:"form-control w-full",children:[(null==r?void 0:r.label)&&(0,n.jsx)("div",{className:"label",children:(0,n.jsx)("span",{className:"label-text",children:null==r?void 0:r.label})}),(0,n.jsx)("input",{className:"input input-bordered w-full data-[iserror=true]:input-error","data-iserror":!!t,...i,...r}),t&&(0,n.jsx)("div",{className:"label text-start",children:(0,n.jsx)("span",{className:"label-text-alt text-error",children:t})})]})}},9375:function(e,t,r){"use strict";r.d(t,{Z:function(){return i}});var n=r(9268);function i(){return(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 shrink-0 stroke-current",fill:"none",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})})}},4177:function(e,t,r){"use strict";r.d(t,{Z:function(){return d}});var n=r(8421),i=r(6934),s=r.n(i),a=r(2351),o=r(6008),l=r(2298),u=r(2913);function d(){let e=(0,o.useRouter)(),t=(0,o.usePathname)(),{data:r,isLoading:i,error:d}=(0,a.a)({refetchOnWindowFocus:!0,staleTime:60,refetchInterval:3e5,queryKey:["user"],queryFn:async()=>{let r=await (0,n.Z)();if(!r)return null;let i=await fetch("".concat("https://typenomore.com","/api/user"),{headers:{"Content-Type":"application/json",accept:"application/json",Authorization:"Bearer ".concat(r)}}),a=await i.json(),{data:o}=a,d="/login/"===t||"/register/"===t,c=401===a.code;if(c&&!d)return e.push("/login");if(o.email_verified_at&&"/email/verification/"===t)return e.push("/");if(403===a.code){var m;let t=null===(m=a.data)||void 0===m?void 0:m.type;return"unverified_email"===t?e.push("/email/verification"):"unsubscription"===t?e.push("/subscription"):e.push("/403")}return(o.id&&l.ZP.identify(o.id,o),200==a.code||d)?(s().setUser(o.id,o.email,o.name),o):((0,u.Am)(a.message,{type:"error"}),s().notify("Failed to fetch user"),e.push("/login"),null)}});return{user:r,isLoading:i,error:d}}},2432:function(e,t,r){"use strict";function n(e){var t,r,n,i;let{response:s,setError:a}=e;null===(t=window)||void 0===t||t.scrollTo(0,0);let o=[];422==s.code&&(null===(r=s.data)||void 0===r?void 0:r.errors)?Object.keys(null===(n=s.data)||void 0===n?void 0:n.errors).forEach(e=>{var t,r,n;let i=null===(n=s.data)||void 0===n?void 0:null===(r=n.errors)||void 0===r?void 0:null===(t=r[e])||void 0===t?void 0:t[0];if(!i)return 1;o.push(i),a(e,{type:"custom",message:i},{shouldFocus:!0})}):a("global",{type:"custom",message:(null===(i=s.data)||void 0===i?void 0:i.message)||s.message||"Failed"})}r.d(t,{Z:function(){return n}})},2390:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return w}});var n=r(9268),i=r(6394),s=r.n(i),a=r(5846),o=r.n(a),l=r(9700),u=r(2432),d=r(2266),c=r(6008),m=r(9375),p=r(2913),g=r(4177),f=r(2026),v=r(6934),h=r.n(v);function w(){var e,t,r,i,a,v;let w=(0,c.useRouter)(),{user:y}=(0,g.Z)();(null==y?void 0:y.id)&&w.replace("/");let{register:x,handleSubmit:j,formState:{errors:b,isSubmitting:N,isDirty:Z,isValid:E},setError:k,clearErrors:_}=(0,l.cI)();async function S(e){try{_();let t=await fetch("".concat("https://typenomore.com","/api/register"),{method:"POST",headers:{"Content-Type":"application/json",accept:"application/json"},body:JSON.stringify(e)}),r=await t.json();if(200!=r.code){(0,u.Z)({response:r,setError:k});return}let{token:n}=r.data;await f.Z.run(async(e,t)=>{let{token:r}=t;return await e.clientStorage.setAsync("token",r)},{token:n}),await f.Z.run(async e=>await e.clientStorage.getAsync("token")),w.push("/")}catch(t){p.Am.error("Something went wrong"),console.error({error:t}),h().notify(t,t=>{t.request.body={name:e.name,email:e.email}})}}return(0,n.jsxs)("main",{className:"flex h-screen w-full flex-col items-center justify-center gap-6 p-5 text-center",children:[(0,n.jsx)(s(),{width:100,height:46.27,src:"/images/logo.png",alt:"typenomore logo"}),(0,n.jsxs)("form",{className:"flex w-full flex-col gap-3",onSubmit:j(S),children:[(null==b?void 0:null===(e=b.global)||void 0===e?void 0:e.message)&&(0,n.jsxs)("section",{role:"alert",className:"alert alert-error inline-flex gap-2 text-start",children:[(0,n.jsx)(m.Z,{}),(0,n.jsx)("div",{dangerouslySetInnerHTML:{__html:null==b?void 0:null===(t=b.global)||void 0===t?void 0:t.message}})]}),(0,n.jsx)(d.Z,{type:"text",placeholder:"Name",error:null==b?void 0:null===(r=b.name)||void 0===r?void 0:r.message,register:x("name"),required:!0}),(0,n.jsx)(d.Z,{type:"email",placeholder:"Email address",error:null==b?void 0:null===(i=b.email)||void 0===i?void 0:i.message,register:x("email"),required:!0}),(0,n.jsx)(d.Z,{type:"password",placeholder:"Password",error:null==b?void 0:null===(a=b.password)||void 0===a?void 0:a.message,register:x("password"),required:!0}),(0,n.jsx)(d.Z,{type:"password",placeholder:"Password Confirmation",error:null==b?void 0:null===(v=b.password_confirmation)||void 0===v?void 0:v.message,register:x("password_confirmation"),required:!0}),(0,n.jsxs)("button",{type:"submit",className:"btn btn-primary  text-white",disabled:N||!Z||!E,onClick:()=>_(),children:[N&&(0,n.jsx)("span",{className:"loading loading-spinner"}),"Sign up"]})]}),(0,n.jsxs)("p",{className:"text-blacktext",children:["Already registered? \xa0",(0,n.jsx)(o(),{href:"/login",className:"text-primary",children:"Sign In here"})]})]})}},2026:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=new class{run(e,t){return new Promise((r,n)=>{let i=this.id++,s=e=>{var t,a;if(("https://www.figma.com"===e.origin||"https://staging.figma.com"===e.origin)&&((null===(t=e.data.pluginMessage)||void 0===t?void 0:t.type)==="EVAL_RESULT"&&e.data.pluginMessage.id===i&&(window.removeEventListener("message",s),r(e.data.pluginMessage.result)),(null===(a=e.data.pluginMessage)||void 0===a?void 0:a.type)==="EVAL_REJECT"&&e.data.pluginMessage.id===i)){window.removeEventListener("message",s);let t=e.data.pluginMessage.error;n(Error("string"==typeof t?t:"An error occurred in FigmaAPI.run()"))}};window.addEventListener("message",s);let a={pluginMessage:{type:"EVAL",code:e.toString(),id:i,params:t},pluginId:"*"};["https://www.figma.com","https://staging.figma.com"].forEach(e=>{try{parent.postMessage(a,e)}catch(e){}})})}constructor(){this.id=0}}},8421:function(e,t,r){"use strict";r.d(t,{Z:function(){return i}});var n=r(2026);function i(){return n.Z.run(async e=>await e.clientStorage.getAsync("token"))}}},function(e){e.O(0,[387,442,846,394,700,253,961,744],function(){return e(e.s=8554)}),_N_E=e.O()}]);